7.3 The AGC Algorithm
The purpose of the automatic gain control (AGC) algorithm is to regulate the received signal strength at the input of the ADCs such that the required signal SNR for proper decoding is met. For example, if the received signal strength is weak at the antenna, the AGC algorithm boosts the receiver gain stages in order to minimize the noise and bring the signal level to an acceptable SNR. Likewise, if the received signal strength is strong, the AGC algorithm attenuates the receiver gain stages in order to avoid signal clipping and nonlinear degradations that would otherwise deteriorate the signal SNR. In receivers that employ modern digital modulation techniques, the AGC corrects for long term fading effects due to shadowing. The short term fast fades, especially those denoted as frequency selective fades, are corrected for in the digital equalizer, be it a RAKE receiver, a decision feedback equalizer (DFE), or any other form of equalization designed to deal with this type of fading. After equalization, any remaining symbols in error are corrected, or attempted to be corrected, in the forward error correction block using a variety of appropriate coding schemes. It is important to note that the AGC must not correct for fast fades especially within a data slot, or a block of symbols within frame. Performing amplitude gain control within a coherent block of data could serve to adversely affect the equalizer or forward error correction.

The AGC loop mostly controls various analog gain and attenuation blocks at various points in the receive chain. For example, in a superheterodyne receiver,
depicted in Figure 7.8, the AGC loop could switch the LNA gain from low-setting to high setting and vice versa, perform a similar function concerning the post mixer amplifier (PMA), and vary the gain of the voltage gain amplifier (VGA) to maintain a certain signal level relative to the noise in the receiver thus maintaining an acceptable SNR. The object of this discussion is not how to control the receiver line-up, but rather how to design the digital loop that estimates the input signal power and adjusts the gain accordingly to maintain a satisfactory SNR. The following analysis is applicable to most common receiver line-up architectures. 